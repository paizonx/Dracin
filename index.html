<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Video</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
html,body{margin:0;padding:0;background:#000;height:100%}
body{display:flex;align-items:center;justify-content:center;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
.wrapper{width:min(900px,100%);padding:16px}
.player{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  background:#000;
  border-radius:16px;
  overflow:hidden;
}
.player.vertical{aspect-ratio:9/16}
.poster{
  position:absolute;inset:0;
  background:center/cover no-repeat;
  opacity:.9;
}
.poster::after{
  content:"";
  position:absolute;inset:0;
  background:linear-gradient(to bottom, rgba(0,0,0,.2), rgba(0,0,0,.7));
}
iframe{position:absolute;inset:0;width:100%;height:100%;border:0;display:none}
.overlay{
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
}
.card{
  background:rgba(0,0,0,.55);
  backdrop-filter: blur(6px);
  border-radius:14px;
  padding:20px 22px;
  text-align:center;
  color:#fff;
}
.card h1{margin:0 0 8px 0;font-size:20px}
.card p{margin:0 0 14px 0;font-size:13px;opacity:.85}
.actions{
  display:flex;
  gap:12px;
  justify-content:center;
}
.btn{
  padding:10px 18px;
  border-radius:999px;
  border:0;
  cursor:pointer;
  font-weight:700;
}
.btn.play{background:#3b82f6;color:#fff}
.btn.download{background:#111827;color:#fff}
.share{
  margin-top:14px;
  display:flex;
  gap:14px;
  justify-content:center;
  color:#ddd;
  font-size:13px;
}
.share span{cursor:pointer;opacity:.9}
.share span:hover{opacity:1}
</style>
</head>
<body>
<div class="wrapper">
  <div id="player" class="player">
    <div id="poster" class="poster"></div>

    <iframe id="dm" allow="autoplay;fullscreen" allowfullscreen></iframe>

    <div id="overlay" class="overlay">
      <div class="card">
        <h1>Video</h1>
        <p>Tap Play to start. “Download” opens the same safe link.</p>
        <div class="actions">
          <button id="playBtn" class="btn play">Play</button>
          <button id="dlBtn" class="btn download">Download</button>
        </div>
        <div class="share">
          <span id="copyBtn">Copy link</span>
          <span id="shareFb">Facebook</span>
          <span id="shareWa">WhatsApp</span>
          <span id="shareTg">Telegram</span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const SMARTLINK = "https://harbourbreederdump.com/an29v43y4m?key=549781a632ef3b8389ad01c914a1ee3a"; // ganti
const q = new URLSearchParams(location.search);
const dm = q.get("dm");
const ar = q.get("ar");
const player = document.getElementById("player");
const poster = document.getElementById("poster");
const frame = document.getElementById("dm");
const overlay = document.getElementById("overlay");

if(ar==="9x16") player.classList.add("vertical");

function extractId(v){
  if(!v) return "";
  if(/^[a-zA-Z0-9]+$/.test(v)) return v;
  try{
    const u=new URL(v);
    if(u.hostname.includes("dai.ly")) return u.pathname.slice(1);
    const m=u.pathname.match(/\/video\/([^_/?#]+)/);
    return m?m[1]:"";
  }catch(e){return "";}
}

const id = extractId(dm);

async function loadMeta(){
  if(!id) return;
  const o = await fetch("https://www.dailymotion.com/services/oembed?format=json&url=https://www.dailymotion.com/video/"+id);
  if(!o.ok) return;
  const j = await o.json();
  poster.style.backgroundImage = `url(${j.thumbnail_url})`;
}

function openSmart(){
  if(!SMARTLINK.includes("example")) window.open(SMARTLINK,"_blank","noopener");
}

document.getElementById("playBtn").onclick=()=>{
  openSmart();
  frame.src="https://www.dailymotion.com/embed/video/"+id+"?autoplay=1";
  frame.style.display="block";
  overlay.style.display="none";
};

document.getElementById("dlBtn").onclick=openSmart;

document.getElementById("copyBtn").onclick=()=>{
  navigator.clipboard.writeText(location.href).catch(()=>{});
};

document.getElementById("shareFb").onclick=()=>window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(location.href));
document.getElementById("shareWa").onclick=()=>window.open("https://wa.me/?text="+encodeURIComponent(location.href));
document.getElementById("shareTg").onclick=()=>window.open("https://t.me/share/url?url="+encodeURIComponent(location.href));

loadMeta();
</script>
</body>
</html>
